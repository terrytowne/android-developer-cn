<!DOCTYPE html>












































































<html>
<head>


<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width" />

<link rel="shortcut icon" type="image/x-icon" href="../../favicon.ico" />
<title>Android 4.1 APIs | Android Developers</title>

<!-- STYLESHEETS -->
<link rel="stylesheet"
href="http://fonts.googleapis.com/css?family=Roboto:regular,medium,thin,italic,mediumitalic,bold" title="roboto">
<link href="../../assets/css/default.css" rel="stylesheet" type="text/css">



<!-- JAVASCRIPT -->
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script src="../../assets/js/android_3p-bundle.js" type="text/javascript"></script>
<script type="text/javascript">
  var toRoot = "../../";
  var devsite = false;
</script>
<script src="../../assets/js/docs.js" type="text/javascript"></script>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-5831155-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>
<body class="gc-documentation 
  about" itemscope itemtype="http://schema.org/Article">

<a name="top"></a>

    <!-- Header -->
    <div id="header">
        <div class="wrap" id="header-wrap">
          <div class="col-3 logo">
          <a href="../../index.html">
            <img src="../../assets/images/dac_logo.png" width="123" height="25" alt="Android Developers" />
          </a>
          <div class="btn-quicknav" id="btn-quicknav">
          	<a href="#" class="arrow-inactive">Quicknav</a>
			      <a href="#" class="arrow-active">Quicknav</a>
          </div>
          </div>
            <ul class="nav-x col-9">
                <li class="design">
                  <a href="../../design/index.html"
                  zh-tw-lang="設計"
                  zh-cn-lang="设计"
                  ru-lang="Проектирование"
                  ko-lang="디자인"
                  ja-lang="設計"
                  es-lang="Diseñar"               
                  >Design</a></li>
                <li class="develop"><a href="../../develop/index.html"
                  zh-tw-lang="開發"
                  zh-cn-lang="开发"
                  ru-lang="Разработка"
                  ko-lang="개발"
                  ja-lang="開発"
                  es-lang="Desarrollar"               
                  >Develop</a></li>
                <li class="distribute last"><a href="../../distribute/index.html"
                  zh-tw-lang="發佈"
                  zh-cn-lang="分发"
                  ru-lang="Распространение"
                  ko-lang="배포"
                  ja-lang="配布"
                  es-lang="Distribuir"               
                  >Distribute</a></li>
            </ul>
            
            <!-- New Search -->
            <div class="menu-container">
            <div class="moremenu">
    <div id="more-btn"></div>
  </div>
  <div class="morehover" id="moremenu">
    <div class="top"></div>
    <div class="mid">
      <div class="header">Links</div>
      <ul>
        <li><a href="https://play.google.com/apps/publish/">Google Play Developer Console</a></li>
        <li><a href="http://android-developers.blogspot.com/">Android Developers Blog</a></li>
        <li><a href="../../about/index.html">About Android</a></li>
      </ul>
      <div class="header">Android Sites</div>
      <ul>
        <li><a href="http://www.android.com">Android.com</a></li>
        <li class="active"><a>Android Developers</a></li>
        <li><a href="http://source.android.com">Android Open Source Project</a></li>
      </ul>
      
      
      
      


      <br class="clearfix" />
    </div>
    <div class="bottom"></div>
  </div>
  <div class="search" id="search-container">
    <div class="search-inner">
      <div id="search-btn"></div>
      <div class="left"></div>
      <form onsubmit="return submit_search()">
        <input id="search_autocomplete" type="text" value="" autocomplete="off" name="q"
onfocus="search_focus_changed(this, true)" onblur="search_focus_changed(this, false)"
onkeydown="return search_changed(event, true, '../../')" 
onkeyup="return search_changed(event, false, '../../')" />
      </form>
      <div class="right"></div>
        <a class="close hide">close</a>
        <div class="left"></div>
        <div class="right"></div>
    </div>
  </div>

  <div class="search_filtered_wrapper reference">
    <div class="suggest-card reference no-display">
      <ul class="search_filtered">
      </ul>
    </div>
  </div>

  <div class="search_filtered_wrapper docs">
    <div class="suggest-card dummy no-display">&nbsp;</div>
    <div class="suggest-card develop no-display">
      <ul class="search_filtered">
      </ul>
      <div class="child-card guides no-display">
      </div>
      <div class="child-card training no-display">
      </div>
    </div>
    <div class="suggest-card design no-display">
      <ul class="search_filtered">
      </ul>
    </div>
    <div class="suggest-card distribute no-display">
      <ul class="search_filtered">
      </ul>
    </div>
  </div>

  </div>
  <!-- /New Search>
          
          
          <!-- Expanded quicknav -->
           <div id="quicknav" class="col-9">
                <ul>
                    <li class="design">
                      <ul>
                        <li><a href="../../design/index.html">Get Started</a></li>
                        <li><a href="../../design/style/index.html">Style</a></li>
                        <li><a href="../../design/patterns/index.html">Patterns</a></li>
                        <li><a href="../../design/building-blocks/index.html">Building Blocks</a></li>
                        <li><a href="../../design/downloads/index.html">Downloads</a></li>
                        <li><a href="../../design/videos/index.html">Videos</a></li>
                      </ul>
                    </li>
                    <li class="develop">
                      <ul>
                        <li><a href="../../training/index.html"
                          zh-tw-lang="訓練課程"
                          zh-cn-lang="培训"
                          ru-lang="Курсы"
                          ko-lang="교육"
                          ja-lang="トレーニング"
                          es-lang="Capacitación"               
                          >Training</a></li>
                        <li><a href="../../guide/components/index.html"
                          zh-tw-lang="API 指南"
                          zh-cn-lang="API 指南"
                          ru-lang="Руководства по API"
                          ko-lang="API 가이드"
                          ja-lang="API ガイド"
                          es-lang="Guías de la API"               
                          >API Guides</a></li>
                        <li><a href="../../reference/packages.html"
                          zh-tw-lang="參考資源"
                          zh-cn-lang="参考"
                          ru-lang="Справочник"
                          ko-lang="참조문서"
                          ja-lang="リファレンス"
                          es-lang="Referencia"               
                          >Reference</a></li>
                        <li><a href="../../tools/index.html"
                          zh-tw-lang="相關工具"
                          zh-cn-lang="工具"
                          ru-lang="Инструменты"
                          ko-lang="도구"
                          ja-lang="ツール"
                          es-lang="Herramientas"               
                          >Tools</a>
                          <ul><li><a href="../../sdk/index.html">Get the SDK</a></li></ul>
                        </li>
                        <li><a href="../../google/index.html">Google Services</a>
                        </li>
                        
                      </ul>
                    </li>
                    <li class="distribute last">
                      <ul>
                        <li><a href="../../distribute/index.html">Google Play</a></li>
                        <li><a href="../../distribute/googleplay/publish/index.html">Publishing</a></li>
                        <li><a href="../../distribute/googleplay/promote/index.html">Promoting</a></li>
                        <li><a href="../../distribute/googleplay/quality/index.html">App Quality</a></li>
                        <li><a href="../../distribute/googleplay/spotlight/index.html">Spotlight</a></li>
                        <li><a href="../../distribute/open.html">Open Distribution</a></li>
                      </ul>
                    </li>
                </ul>
          </div>
          <!-- /Expanded quicknav -->
        </div>
    </div>
    <!-- /Header -->
    
    
  <div id="searchResults" class="wrap" style="display:none;">
          <h2 id="searchTitle">Results</h2>
          <div id="leftSearchControl" class="search-control">Loading...</div>
  </div>
    
    
  




  

  <div class="wrap clearfix" id="body-content">
    <div class="col-3" id="side-nav" itemscope itemtype="http://schema.org/SiteNavigationElement">
      <div id="devdoc-nav" class="scroll-pane">
<a class="totop" href="#top" data-g-event="left-nav-top">to top</a>

<ul id="nav">
  
<li class="nav-section">
    <div class="nav-section-header"><a href="../../about/index.html">Welcome</a></div>
    <ul>
      <li><a href="../../about/start.html">Get Started</a></li>
    </ul>
  </li> 
  <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/kitkat.html">
      <span class="en">KitKat</span></a></div>
      <ul>
        <li><a href="../../about/versions/android-4.4.html">Android 4.4 APIs</a></li>
      </ul>
  </li>
  <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/jelly-bean.html">
      <span class="en">Jelly Bean</span></a></div>
      <ul>
        <li><a href="../../about/versions/android-4.3.html">Android 4.3 APIs</a></li>
        <li><a href="../../about/versions/android-4.2.html">Android 4.2 APIs</a></li>
        <li><a href="../../about/versions/android-4.1.html">Android 4.1 APIs</a></li>
      </ul>
  </li>

  <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/android-4.0-highlights.html">
      <span class="en">Ice Cream Sandwich</span></a></div>
      <ul>
        <li><a href="../../about/versions/android-4.0.3.html">Android 4.0.3 APIs</a></li>
        <li><a href="../../about/versions/android-4.0.html">Android 4.0 APIs</a> </li>
      </ul>
  </li>
  <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/android-3.0-highlights.html">
      <span class="en">Honeycomb</span></a></div>
      <ul>
        <li><a href="../../about/versions/android-3.2.html">Android 3.2 APIs</a></li>
        <li><a href="../../about/versions/android-3.1.html">Android 3.1 APIs</a></li>
        <li><a href="../../about/versions/android-3.0.html">Android 3.0 APIs</a> </li>
      </ul>
  </li>
  <li class="nav-section">
    <div class="nav-section-header"><a href="../../about/versions/android-2.3-highlights.html">
      <span class="en">Gingerbread</span></a></div>
      <ul>
        <li><a href="../../about/versions/android-2.3.4.html">Android 2.3.4 APIs</a></li>
        <li><a href="../../about/versions/android-2.3.3.html">Android 2.3.3 APIs</a></li>
      </ul>
  </li>
  <li class="nav-section">
    <div class="nav-section-header empty"><a href="../../about/dashboards/index.html">Dashboards</a></div>
  </li>

</ul>
        

      </div>
    </div> <!-- end side-nav -->
    <script>
      $(document).ready(function() {
        scrollIntoView("devdoc-nav");
        });
    </script>




<div class="col-13" id="doc-col" >


  
    
      
        <h1 itemprop="name" >Android 4.1 APIs</h1>
      
    
  


  
  <div id="jd-content">


    <div class="jd-descr" itemprop="articleBody">
    <div id="qv-wrapper">
<div id="qv">

<h2>In this document
    <a href="#" onclick="hideNestedItems('#toc41',this);return false;" class="header-toggle">
        <span class="more">show more</span>
        <span class="less" style="display:none">show less</span></a></h2>

<ol id="toc41" class="hide-nested">
  <li><a href="#AppComponents">App Components</a>
    <ol>
      <li><a href="#Isolated">Isolated services</a></li>
      <li><a href="#Memory">Memory management</a></li>
      <li><a href="#ContentProvider">Content providers</a></li>
      <li><a href="#LiveWallpapers">Live Wallpapers</a></li>
      <li><a href="#StackNav">App stack navigation</a></li>
    </ol>
  </li>
  <li><a href="#Multimedia">Multimedia</a>
    <ol>
      <li><a href="#Codecs">Media codecs</a></li>
      <li><a href="#AudioCue">Record audio on cue</a></li>
      <li><a href="#TextTracks">Timed text tracks</a></li>
      <li><a href="#AudioEffects">Audio effects</a></li>
      <li><a href="#Gapless">Gapless playback</a></li>
    </ol>
  </li>
  <li><a href="#Camera">Camera</a>
    <ol>
      <li><a href="#AutoFocus">Auto focus movement</a></li>
      <li><a href="#CameraSounds">Camera sounds</a></li>
    </ol>
  </li>
  <li><a href="#Connectivity">Connectivity</a>
    <ol>
      <li><a href="#AndroidBeam">Android Beam</a></li>
      <li><a href="#LocalNsd">Network service discovery</a></li>
      <li><a href="#WiFiNsd">Wi-Fi P2P service discovery</a></li>
      <li><a href="#NetworkUsage">Network usage</a></li>
    </ol>
  </li>
  <li><a href="#A11y">Accessibility</a>
    <ol>
      <li><a href="#A11yService">Accessibility service APIs</a></li>
      <li><a href="#A11yCustomNav">Customizable app navigation</a></li>
      <li><a href="#A11yStructure">More accessible widgets</a></li>
    </ol>
  </li>
  <li><a href="#CopyPaste">Copy and Paste</a>
    <ol>
      <li><a href="#CopyIntent">Copy and paste with intents</a></li>
    </ol>
  </li>
  <li><a href="#Renderscript">Renderscript</a></li>
  <li><a href="#Animation">Animation</a>
    <ol>
      <li><a href="#ActivityOptions">Activity launch animations</a></li>
      <li><a href="#TimeAnimator">Time animator</a></li>
    </ol>
  </li>
  <li><a href="#UI">User Interface</a>
    <ol>
      <li><a href="#Notifications">Notifications</a></li>
      <li><a href="#SystemUI">Controls for system UI</a></li>
      <li><a href="#RemoteViews">Remote views</a></li>
      <li><a href="#Fonts">Font families</a></li>
    </ol>
  </li>
  <li><a href="#Input">Input Framework</a>
    <ol>
      <li><a href="#InputDevice">Multiple input devices</a></li>
      <li><a href="#Vibrate">Vibrate for input controllers</a></li>
    </ol>
  </li>
  <li><a href="#Permissions">Permissions</a></li>
  <li><a href="#DeviceFeatures">Device Features</a></li>
</ol>

<h2>See also</h2>
<ol>
<li><a
href="../../sdk/api_diff/16/changes.html">API
Differences Report &raquo;</a> </li>
</ol>

</div>
</div>


<p>API Level: 16</p>

<p>Android 4.1 (<code><a href="../../reference/android/os/Build.VERSION_CODES.html#JELLY_BEAN">JELLY_BEAN</a></code>)
is a progression of the platform that offers improved
performance and enhanced user experience. It adds new features for users and app
developers. This document provides an introduction to the most notable and
useful new APIs for app developers.</p>


<div class="sidebox-wrapper">
<div class="sidebox">  
  
<h3 id="ApiLevel">Declare your app API Level</h3>

<p>To better optimize your app for devices running Android 4.1,
  you should set your <a
href="../../guide/topics/manifest/uses-sdk-element.html#target"><code>targetSdkVersion</code></a> to
<code>"16"</code>, install it on an Android 4.1 system image,
test it, then publish an update with this change.</p>

<p>You
can use APIs in Android 4.1 while also supporting older versions by adding
conditions to your code that check for the system API level before executing
APIs not supported by your <a
href="../../guide/topics/manifest/uses-sdk-element.html#min"><code>minSdkVersion</code></a>. 
To learn more about
maintaining backward-compatibility, read <a
href="../../training/backward-compatible-ui/index.html">Creating Backward-Compatible
UIs</a>.</p>

<p>More information about how API levels work is available in <a
href="../../guide/topics/manifest/uses-sdk-element.html#ApiLevels">What is API
Level?</a></p>

</div>
</div>



<p>As an app developer, Android 4.1 is available to you from the
<a href="../../tools/help/sdk-manager.html">SDK Manager</a> as a system image you can
run in the Android emulator and an SDK platform against which you can build your app. You should
download the system image and platform as soon as possible to build and test your
app on Android 4.1.</p>





<h2 id="AppComponents">App Components</h2>



<h3 id="Isolated">Isolated services</h3>

<p>By specifying <a href="../../guide/topics/manifest/service-element.html#isolated"><code>android:isolatedProcess="true"</code></a> in the 
<a href="../../guide/topics/manifest/service-element.html"><code>&lt;service></code></a> tag, your <code><a href="../../reference/android/app/Service.html">Service</a></code> will run under
its own isolated user ID process that has no permissions of its own.</p>


<h3 id="Memory">Memory management</h3>

<p>New <code><a href="../../reference/android/content/ComponentCallbacks2.html">ComponentCallbacks2</a></code> constants such as <code><a href="../../reference/android/content/ComponentCallbacks2.html#TRIM_MEMORY_RUNNING_LOW">TRIM_MEMORY_RUNNING_LOW</a></code> and <code><a href="../../reference/android/content/ComponentCallbacks2.html#TRIM_MEMORY_RUNNING_CRITICAL">TRIM_MEMORY_RUNNING_CRITICAL</a></code> provide foreground
processes more information about
memory state before the system calls <code><a href="../../reference/android/app/Activity.html#onLowMemory()">onLowMemory()</a></code>.</p>

<p>New <code><a href="../../reference/android/app/ActivityManager.html#getMyMemoryState(android.app.ActivityManager.RunningAppProcessInfo)">getMyMemoryState(ActivityManager.RunningAppProcessInfo)</a></code> method allows you to
retrieve the general memory state.</p>


<h3 id="ContentProvider">Content providers</h3>

<p>A new method, <code><a href="../../reference/android/content/ContentResolver.html#acquireUnstableContentProviderClient(android.net.Uri)">acquireUnstableContentProviderClient()</a></code>, allows you to access a <code><a href="../../reference/android/content/ContentProviderClient.html">ContentProviderClient</a></code> that may be "unstable" such that your app will not crash if
the content provider does. It's useful when you are interacting with content providers in a separate
app.</p>



<h3 id="LiveWallpapers">Live Wallpapers</h3>

<p>New intent protocol to directly launch the live wallpaper preview activity so you can help
  users easily select your live wallpaper without forcing them to leave 
your app and navigate through the Home wallpaper picker.</p>

<p>To launch the live wallpaper picker, call <code><a href="../../reference/android/content/Context.html#startActivity(android.content.Intent)">startActivity()</a></code> with an <code><a href="../../reference/android/content/Intent.html">Intent</a></code> using
<code><a href="../../reference/android/app/WallpaperManager.html#ACTION_CHANGE_LIVE_WALLPAPER">ACTION_CHANGE_LIVE_WALLPAPER</a></code> and an extra
that specifies your live wallpaper <code><a href="../../reference/android/content/ComponentName.html">ComponentName</a></code> as a string in <code><a href="../../reference/android/app/WallpaperManager.html#EXTRA_LIVE_WALLPAPER_COMPONENT">EXTRA_LIVE_WALLPAPER_COMPONENT</a></code>.</p>




<h3 id="StackNav">App stack navigation</h3>

<p>Android 4.1 makes it much easier to implement the proper design patterns for Up navigation.
All you need to do is add the <a
href="../../guide/topics/manifest/activity-element.html#parent"><code>android:parentActivityName</code></a> to each <a
href="../../guide/topics/manifest/activity-element.html"><code>&lt;activity></code></a> element in
your manifest file. The system uses this information to open the appropriate activity when the user
presses the Up button in the action bar (while also finishing the current activity). So if you
declare the <a href="../../guide/topics/manifest/activity-element.html#parent"><code>android:parentActivityName</code></a> for each activity, you don't need the <code><a href="../../reference/android/app/Activity.html#onOptionsItemSelected(android.view.MenuItem)">onOptionsItemSelected()</a></code> method to handle click
events on the action bar's app icon&mdash;the system now handles that event and resumes or
creates the appropriate activity.</p>

<p>This is particularly powerful for scenarios in which the user enters one of your app's activities
through a "deep dive" intent such as from a notification or an intent from
different app (as described in the design guide for <a 
href="../../design/patterns/navigation.html#between-apps">Navigating Between Apps</a>). When
the user enters your activity this way, your app may not naturally have a back stack of
activities that can be resumed as the user navigates up. However, when you supply the <a
href="../../guide/topics/manifest/activity-element.html#parent"><code>android:parentActivityName</code></a> attribute for your activities, the system recognizes
 whether or not your app already contains a back stack of parent activities and, if not, constructs
a synthetic back stack that contains all parent activities.</p>

<p class="note"><strong>Note:</strong> When the user enters a deep activity in your app and 
  it creates a new task for your app, the system actually inserts the stack of parent activities 
  into the task. As such, pressing the Back button also navigates back through the stack of parent
  activities.</p>

<p>When the system creates a synthetic back stack for your app, it builds a basic <code><a href="../../reference/android/content/Intent.html">Intent</a></code> to create a new instance of each parent activity. So there's no
  saved state for the parent activities the way you'd expect had the user naturally navigated
through
  each activity. If any of the parent activities normally show a UI that's dependent on
  the user's context, that context information will be missing and you should deliver it when the
user
  navigates back through the stack. For example, if the user is viewing an album
in a music app, navigating up might bring them to an activity that lists all albums in a chosen
music genre. In this case, if the stack must be created, it's necessary that you inform the parent
activity what genre the current album belongs to so that the parent can display the proper list as
if the user actually came from that activity. To deliver such information to a synthetic parent
activity, you must override the <code><a href="../../reference/android/app/Activity.html#onPrepareNavigateUpTaskStack(android.app.TaskStackBuilder)">onPrepareNavigateUpTaskStack()</a></code> method. This
provides you with a <code><a href="../../reference/android/app/TaskStackBuilder.html">TaskStackBuilder</a></code> object that the system created in order to
synthesize the parent activities. The <code><a href="../../reference/android/app/TaskStackBuilder.html">TaskStackBuilder</a></code> contains <code><a href="../../reference/android/content/Intent.html">Intent</a></code> objects that the system uses to create each parent activity. In your
implementation of <code><a href="../../reference/android/app/Activity.html#onPrepareNavigateUpTaskStack(android.app.TaskStackBuilder)">onPrepareNavigateUpTaskStack()</a></code>, you can modify the appropriate <code><a href="../../reference/android/content/Intent.html">Intent</a></code> to
add extra data that the parent activity can use to determine the appropriate context and display
the appropriate UI.</p>

<p>When the system creates the <code><a href="../../reference/android/app/TaskStackBuilder.html">TaskStackBuilder</a></code>, it adds the <code><a href="../../reference/android/content/Intent.html">Intent</a></code> objects that are used to create the parent activities in their logical
order beginning from the top of the activity tree. So, the last <code><a href="../../reference/android/content/Intent.html">Intent</a></code> added to the internal array is the direct parent of the current activity. If
you want to modify the <code><a href="../../reference/android/content/Intent.html">Intent</a></code> for the activity's parent, first determine
the length of the array with <code><a href="../../reference/android/app/TaskStackBuilder.html#getIntentCount()">getIntentCount()</a></code> and pass that
value to <code><a href="../../reference/android/app/TaskStackBuilder.html#editIntentAt(int)">editIntentAt()</a></code>.</p>

<p>If your app structure is more complex, there are several other APIs 
  available that allow you to handle the behavior of Up navigation and
  fully customize the synthetic back stack. Some of the APIs that give you additional 
  control include:</p>
<dl>
  <dt><code><a href="../../reference/android/app/Activity.html#onNavigateUp()">onNavigateUp()</a></code></dt>
    <dd>Override this to perform a custom action when the user presses the Up button.</dd>
  <dt><code><a href="../../reference/android/app/Activity.html#navigateUpTo(android.content.Intent)">navigateUpTo(Intent)</a></code></dt>
    <dd>Call this to finish the current activity and go to the activity indicated by the
    supplied <code><a href="../../reference/android/content/Intent.html">Intent</a></code>. If the activity exists in the back stack, but
    is not the closest parent, then all other activities between the current activity and the
    activity specified with the intent are finished as well.</dd>
  <dt><code><a href="../../reference/android/app/Activity.html#getParentActivityIntent()">getParentActivityIntent()</a></code></dt>
    <dd>Call this to get the <code><a href="../../reference/android/content/Intent.html">Intent</a></code> that will start the logical
    parent for the current activity.</dd>
  <dt><code><a href="../../reference/android/app/Activity.html#shouldUpRecreateTask(android.content.Intent)">shouldUpRecreateTask(Intent)</a></code></dt>
    <dd>Call this to query whether a synthetic back stack must be created in order to navigate
    up. Returns true if a synthetic stack must be created, false if the appropropriate stack
  already exists.</dd>
  <dt><code><a href="../../reference/android/app/Activity.html#finishAffinity()">finishAffinity()</a></code></dt>
    <dd>Call this to finish the current activity and all parent activities with the same
      task affinity that are chained to the current activity.
      If you override the default behaviors such as
  <code><a href="../../reference/android/app/Activity.html#onNavigateUp()">onNavigateUp()</a></code>, you should call this method when you
  create a synthetic back stack upon Up navigation.</dd>
  <dt><code><a href="../../reference/android/app/Activity.html#onCreateNavigateUpTaskStack(android.app.TaskStackBuilder)">onCreateNavigateUpTaskStack</a></code></dt>
    <dd>Override this if you need to fully control how the synthetic task stack is created. If you want to simply add some extra data to the intents for your back stack, you should instead override <code><a href="../../reference/android/app/Activity.html#onPrepareNavigateUpTaskStack(android.app.TaskStackBuilder)">onPrepareNavigateUpTaskStack()</a></code></dd>
</dl>

<p>However, most apps don't need to use these APIs or implement <code><a href="../../reference/android/app/Activity.html#onPrepareNavigateUpTaskStack(android.app.TaskStackBuilder)">onPrepareNavigateUpTaskStack()</a></code>, but can can achieve the correct behavior simply by
adding <a
href="../../guide/topics/manifest/activity-element.html#parent"><code>android:parentActivityName</code></a> to each <a
href="../../guide/topics/manifest/activity-element.html"><code>&lt;activity></code></a> element.</p>











<h2 id="Multimedia">Multimedia</h2>

<h3 id="Codecs">Media codecs</h3>

<p>The <code><a href="../../reference/android/media/MediaCodec.html">MediaCodec</a></code> class provides access to low-level media codecs for encoding
and decoding your media. You can instantiate a <code><a href="../../reference/android/media/MediaCodec.html">MediaCodec</a></code> by calling <code><a href="../../reference/android/media/MediaCodec.html#createEncoderByType(java.lang.String)">createEncoderByType()</a></code> to encode media or call <code><a href="../../reference/android/media/MediaCodec.html#createDecoderByType(java.lang.String)">createDecoderByType()</a></code> to decode media. Each of these
methods take a MIME type for the type of media you want to encode or decode, such as <code>"video/3gpp"</code> or <code>"audio/vorbis"</code>. </p>

<p>With an instance of <code><a href="../../reference/android/media/MediaCodec.html">MediaCodec</a></code> created, you can then call <code><a href="../../reference/android/media/MediaCodec.html#configure(android.media.MediaFormat, android.view.Surface, android.media.MediaCrypto, int)">configure()</a></code> to specify properties such as the media format or
whether or not the content is encrypted.</p>

<p>Whether you're encoding or decoding your media, the rest of the process is the same after you
create the <code><a href="../../reference/android/media/MediaCodec.html">MediaCodec</a></code>. First call <code><a href="../../reference/android/media/MediaCodec.html#getInputBuffers()">getInputBuffers()</a></code> to get an array of input <code><a href="../../reference/java/nio/ByteBuffer.html">ByteBuffer</a></code>
objects and <code><a href="../../reference/android/media/MediaCodec.html#getOutputBuffers()">getOutputBuffers()</a></code> to get an array of output <code><a href="../../reference/java/nio/ByteBuffer.html">ByteBuffer</a></code> objects.</p>

<p>When you're ready to encode or decode, call <code><a href="../../reference/android/media/MediaCodec.html#dequeueInputBuffer(long)">dequeueInputBuffer()</a></code> to get the index position of the <code><a href="../../reference/java/nio/ByteBuffer.html">ByteBuffer</a></code> (from the array of input buffers) that you should use to to feed in your source
media. After you fill the <code><a href="../../reference/java/nio/ByteBuffer.html">ByteBuffer</a></code> with your source media, release ownership
of the buffer by calling <code><a href="../../reference/android/media/MediaCodec.html#queueInputBuffer(int, int, int, long, int)">queueInputBuffer()</a></code>.</p>

<p>Likewise for the output buffer, call <code><a href="../../reference/android/media/MediaCodec.html#dequeueOutputBuffer(android.media.MediaCodec.BufferInfo, long)">dequeueOutputBuffer()</a></code> to get the index position of the <code><a href="../../reference/java/nio/ByteBuffer.html">ByteBuffer</a></code>
where you'll receive the results. After you read the output from the <code><a href="../../reference/java/nio/ByteBuffer.html">ByteBuffer</a></code>,
release ownership by calling <code><a href="../../reference/android/media/MediaCodec.html#releaseOutputBuffer(int, boolean)">releaseOutputBuffer()</a></code>.</p>

<p>You can handle encrypted media data in the codecs by calling <code><a href="../../reference/android/media/MediaCodec.html#queueSecureInputBuffer(int, int, android.media.MediaCodec.CryptoInfo, long, int)">queueSecureInputBuffer()</a></code> in conjunction with
  the <code><a href="../../reference/android/media/MediaCrypto.html">MediaCrypto</a></code> APIs, instead of the normal <code><a href="../../reference/android/media/MediaCodec.html#queueInputBuffer(int, int, int, long, int)">queueInputBuffer()</a></code>.</p>

<p>For more information about how to use codecs, see the <code><a href="../../reference/android/media/MediaCodec.html">MediaCodec</a></code> documentation.</p>

<!--
<h3 id="Routing">Media routing</h3>

<p>The new <code><a href="../../reference/android/media/MediaRouter.html">MediaRouter</a></code> class allows you to route media channels and 
  streams from the current device to external speakers and other devices. You
can acquire an instance of <code><a href="../../reference/android/media/MediaRouter.html">MediaRouter</a></code> by calling <code><a href="../../reference/android/content/Context.html#getSystemService(java.lang.String)">getSystemService(</a></code><code><a href="../../reference/android/content/Context.html#MEDIA_ROUTER_SERVICE">MEDIA_ROUTER_SERVICE)</a></code>.</p>
-->


<h3 id="AudioCue">Record audio on cue</h3>

<p>New method <code><a href="../../reference/android/media/AudioRecord.html#startRecording()">startRecording()</a></code> allows
you to begin audio recording based on a cue defined by a <code><a href="../../reference/android/media/MediaSyncEvent.html">MediaSyncEvent</a></code>.
The <code><a href="../../reference/android/media/MediaSyncEvent.html">MediaSyncEvent</a></code> specifies an audio session 
(such as one defined by <code><a href="../../reference/android/media/MediaPlayer.html">MediaPlayer</a></code>), which when complete, triggers
the audio recorder to begin recording. For example, you can use this functionality to
play an audio tone that indicates the beginning of a recording session and recording
automatically begins so you don't have to manually synchronize the tone and the beginning
of recording.</p>


<h3 id="TextTracks">Timed text tracks</h3>

<p>The <code><a href="../../reference/android/media/MediaPlayer.html">MediaPlayer</a></code> now handles both in-band and out-of-band text tracks.
In-band text tracks come as a text track within an MP4 or 3GPP media source. Out-of-band text
tracks can be added as an external text source via <code><a href="../../reference/android/media/MediaPlayer.html#addTimedTextSource(android.content.Context, android.net.Uri, java.lang.String)">addTimedTextSource()</a></code> method. After all external text
track sources are added, <code><a href="../../reference/android/media/MediaPlayer.html#getTrackInfo()">getTrackInfo()</a></code> should be called to get
the refreshed list of all available tracks in a data source.</p>

<p>To set the track to use with the <code><a href="../../reference/android/media/MediaPlayer.html">MediaPlayer</a></code>, you must
call <code><a href="../../reference/android/media/MediaPlayer.html#selectTrack(int)">selectTrack()</a></code>, using the index
position for the track you want to use.</p>

<p>To be notified when the text track is ready to play, implement the
<code><a href="../../reference/android/media/MediaPlayer.OnTimedTextListener.html">MediaPlayer.OnTimedTextListener</a></code> interface and pass
it to <code><a href="../../reference/android/media/MediaPlayer.html#setOnTimedTextListener(android.media.MediaPlayer.OnTimedTextListener)">setOnTimedTextListener()</a></code>.</p>


<h3 id="AudioEffects">Audio effects</h3>

<p>The <code><a href="../../reference/android/media/audiofx/AudioEffect.html">AudioEffect</a></code> class now supports additional audio
  pre-processing types when capturing audio:</p>
<ul>
  <li>Acoustic Echo Canceler (AEC) with <code><a href="../../reference/android/media/audiofx/AcousticEchoCanceler.html">AcousticEchoCanceler</a></code>
    removes the contribution of the signal received from the remote party from the captured audio signal.</li>
  <li>Automatic Gain Control (AGC) with <code><a href="../../reference/android/media/audiofx/AutomaticGainControl.html">AutomaticGainControl</a></code>
    automatically normalizes the output of the captured signal.</li>
  <li>Noise Suppressor (NS) with <code><a href="../../reference/android/media/audiofx/NoiseSuppressor.html">NoiseSuppressor</a></code>
    removes background noise from the captured signal.</li>
</ul>

<p>You can apply these pre-processor effects on audio captured with an <code><a href="../../reference/android/media/AudioRecord.html">AudioRecord</a></code> using one of the <code><a href="../../reference/android/media/audiofx/AudioEffect.html">AudioEffect</a></code>
subclasses.</p>

<p class="note"><strong>Note:</strong> It's not guaranteed that all devices support these
effects, so you should always first check availability by calling <code><a href="../../reference/android/media/audiofx/AcousticEchoCanceler.html#isAvailable()">isAvailable()</a></code> on the corresponding
audio effect class.</p>


<h3 id="Gapless">Gapless playback</h3>

<p>You can now perform gapless playback between two separate
<code><a href="../../reference/android/media/MediaPlayer.html">MediaPlayer</a></code> objects. At any time before your first <code><a href="../../reference/android/media/MediaPlayer.html">MediaPlayer</a></code> finishes,
call <code><a href="../../reference/android/media/MediaPlayer.html#setNextMediaPlayer(android.media.MediaPlayer)">setNextMediaPlayer()</a></code> and Android
attempts to start the second player the moment that the first one stops.</p>


Media router. The new APIs MediaRouter, MediaRouteActionProvider, and MediaRouteButton provide
standard mechanisms and UI for choosing where to play media.


<h2 id="Camera">Camera</h2>

<h3 id="AutoFocus">Auto focus movement</h3>

<p>The new interface <code><a href="../../reference/android/hardware/Camera.AutoFocusMoveCallback.html">Camera.AutoFocusMoveCallback</a></code> allows you to listen
for changes to the auto focus movement. You can register your interface with <code><a href="../../reference/android/hardware/Camera.html#setAutoFocusMoveCallback(android.hardware.Camera.AutoFocusMoveCallback)">setAutoFocusMoveCallback()</a></code>. Then when the camera
is in a continuous autofocus mode (<code><a href="../../reference/android/hardware/Camera.Parameters.html#FOCUS_MODE_CONTINUOUS_VIDEO">FOCUS_MODE_CONTINUOUS_VIDEO</a></code> or 
<code><a href="../../reference/android/hardware/Camera.Parameters.html#FOCUS_MODE_CONTINUOUS_PICTURE">FOCUS_MODE_CONTINUOUS_PICTURE</a></code>), you'll receive a call
to <code><a href="../../reference/android/hardware/Camera.AutoFocusMoveCallback.html#onAutoFocusMoving(boolean, android.hardware.Camera)">onAutoFocusMoving()</a></code>,
which tells you whether auto focus has started moving or has stopped moving.</p>

<h3 id="CameraSounds">Camera sounds</h3>

<p>The <code><a href="../../reference/android/media/MediaActionSound.html">MediaActionSound</a></code> class provides a simple set of APIs to produce
standard sounds made by the camera or other media actions. You should use these APIs to play
the appropriate sound when building a custom still or video camera.</p>

<p>To play a sound, simply instantiate a <code><a href="../../reference/android/media/MediaActionSound.html">MediaActionSound</a></code> object, call 
<code><a href="../../reference/android/media/MediaActionSound.html#load(int)">load()</a></code> to pre-load the desired sound, then at the
appropriate time, call <code><a href="../../reference/android/media/MediaActionSound.html#play(int)">play()</a></code>.</p>



<h2 id="Connectivity">Connectivity</h2>


<h3 id="AndroidBeam">Android Beam</h3>

<p>Android Beam&trade; now supports large payload transfers over Bluetooth. When you define the data
to transfer with either the new <code><a href="../../reference/android/nfc/NfcAdapter.html#setBeamPushUris(android.net.Uri[], android.app.Activity)">setBeamPushUris()</a></code>
method or the new callback interface <code><a href="../../reference/android/nfc/NfcAdapter.CreateBeamUrisCallback.html">NfcAdapter.CreateBeamUrisCallback</a></code>, Android
hands off the data transfer to Bluetooth or another alternate transport to
achieve faster transfer speeds. This is especially useful for large payloads such as image and
audio files and requires no visible pairing between the devices. No additional work is required by
your app to take advantage of transfers over Bluetooth.</p>

<p>The <code><a href="../../reference/android/nfc/NfcAdapter.html#setBeamPushUris(android.net.Uri[], android.app.Activity)">setBeamPushUris()</a></code> method takes an array of
<code><a href="../../reference/android/net/Uri.html">Uri</a></code> objects that specify the data you want to transfer from your app.
Alternatively, you can implement the <code><a href="../../reference/android/nfc/NfcAdapter.CreateBeamUrisCallback.html">NfcAdapter.CreateBeamUrisCallback</a></code>
interface, which you can specify for your activity by calling <code><a href="../../reference/android/nfc/NfcAdapter.html#setBeamPushUrisCallback(android.nfc.NfcAdapter.CreateBeamUrisCallback, android.app.Activity)">setBeamPushUrisCallback()</a></code>.</p>

<p>When using the
callback interface, the system calls the interface's <code><a href="../../reference/android/nfc/NfcAdapter.CreateBeamUrisCallback.html#createBeamUris(android.nfc.NfcEvent)">createBeamUris()</a></code> method when the
user executes a share with Android Beam so that you can define the URIs to share at share-time.
This is useful if the URIs to share might vary depending on the user context within the
activity, whereas calling <code><a href="../../reference/android/nfc/NfcAdapter.html#setBeamPushUris(android.net.Uri[], android.app.Activity)">setBeamPushUris()</a></code> is
useful when the URIs to share are unchanging and you can safely define them ahead of time.</p>





<h3 id="LocalNsd">Network service discovery</h3>

<p>Android 4.1 adds support for multicast DNS-based service discovery, which allows you to
find and connect to services offered by peer devices over Wi-Fi, such as mobile devices,
printers, cameras, media players, and others that are registered on the local network.</p>

<p>The new package <code><a href="../../reference/android/net/nsd/package-summary.html">android.net.nsd</a></code> contains the new APIs that allow you to
broadcast your services on the local network, discover local devices on the network, and
connect to devices.</p>

<p>To register your service, you must first create an <code><a href="../../reference/android/net/nsd/NsdServiceInfo.html">NsdServiceInfo</a></code>
  object and define the various properties of your service with methods such as
  <code><a href="../../reference/android/net/nsd/NsdServiceInfo.html#setServiceName(java.lang.String)">setServiceName()</a></code>, 
  <code><a href="../../reference/android/net/nsd/NsdServiceInfo.html#setServiceType(java.lang.String)">setServiceType()</a></code>, and
  <code><a href="../../reference/android/net/nsd/NsdServiceInfo.html#setPort(int)">setPort()</a></code>.
</p>

<p>Then you need to implement <code><a href="../../reference/android/net/nsd/NsdManager.RegistrationListener.html">NsdManager.RegistrationListener</a></code>
and pass it to <code><a href="../../reference/android/net/nsd/NsdManager.html#registerService(android.net.nsd.NsdServiceInfo, int, android.net.nsd.NsdManager.RegistrationListener)">registerService()</a></code>
with your <code><a href="../../reference/android/net/nsd/NsdServiceInfo.html">NsdServiceInfo</a></code>.</p>

<p>To discover services on the network, implement <code><a href="../../reference/android/net/nsd/NsdManager.DiscoveryListener.html">NsdManager.DiscoveryListener</a></code> and pass it to <code><a href="../../reference/android/net/nsd/NsdManager.html#discoverServices(java.lang.String, int, android.net.nsd.NsdManager.DiscoveryListener)">discoverServices()</a></code>.</p>

<p>When your <code><a href="../../reference/android/net/nsd/NsdManager.DiscoveryListener.html">NsdManager.DiscoveryListener</a></code> receives callbacks about services
found, you need to resolve the service by calling 
<code><a href="../../reference/android/net/nsd/NsdManager.html#resolveService(android.net.nsd.NsdServiceInfo, android.net.nsd.NsdManager.ResolveListener)">resolveService()</a></code>, passing it an
implementation of <code><a href="../../reference/android/net/nsd/NsdManager.ResolveListener.html">NsdManager.ResolveListener</a></code> that receives
an <code><a href="../../reference/android/net/nsd/NsdServiceInfo.html">NsdServiceInfo</a></code> object that contains information about the
discovered service, allowing you to initiate the connection.</p>



<h3 id="WiFiNsd">Wi-Fi P2P service discovery</h3>

<p>The Wi-Fi P2P APIs are enhanced in Android 4.1 to support pre-association service discovery in
the <code><a href="../../reference/android/net/wifi/p2p/WifiP2pManager.html">WifiP2pManager</a></code>. This allows you to discover and filter nearby
devices by services using Wi-Fi P2P before connecting to one, while Network Service
Discovery allows you to discover a service on an existing connected network (such as a local Wi-Fi
network).</p>

<p>To broadcast your app as a service over Wi-Fi so that other devices can discover
  your app and connect to it, call <code><a href="../../reference/android/net/wifi/p2p/WifiP2pManager.html#addLocalService(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.nsd.WifiP2pServiceInfo, android.net.wifi.p2p.WifiP2pManager.ActionListener)">addLocalService()</a></code> with a
  <code><a href="../../reference/android/net/wifi/p2p/nsd/WifiP2pServiceInfo.html">WifiP2pServiceInfo</a></code> object that describes your app services.</p>

<p>To initiate discover of nearby devices over Wi-Fi, you need to first decide whether you'll
  communicate using Bonjour or Upnp. To use Bonjour, first set up some callback listeners with
  <code><a href="../../reference/android/net/wifi/p2p/WifiP2pManager.html#setDnsSdResponseListeners(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.DnsSdServiceResponseListener, android.net.wifi.p2p.WifiP2pManager.DnsSdTxtRecordListener)">setDnsSdResponseListeners()</a></code>, which takes both a <code><a href="../../reference/android/net/wifi/p2p/WifiP2pManager.DnsSdServiceResponseListener.html">WifiP2pManager.DnsSdServiceResponseListener</a></code> and <code><a href="../../reference/android/net/wifi/p2p/WifiP2pManager.DnsSdTxtRecordListener.html">WifiP2pManager.DnsSdTxtRecordListener</a></code>. To use Upnp, call 
  <code><a href="../../reference/android/net/wifi/p2p/WifiP2pManager.html#setUpnpServiceResponseListener(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.UpnpServiceResponseListener)">setUpnpServiceResponseListener()</a></code>, which takes a <code><a href="../../reference/android/net/wifi/p2p/WifiP2pManager.UpnpServiceResponseListener.html">WifiP2pManager.UpnpServiceResponseListener</a></code>.</p>

<p>Before you can start discovering services on local devices, you also need to call <code><a href="../../reference/android/net/wifi/p2p/WifiP2pManager.html#addServiceRequest(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.nsd.WifiP2pServiceRequest, android.net.wifi.p2p.WifiP2pManager.ActionListener)">addServiceRequest()</a></code>. When the <code><a href="../../reference/android/net/wifi/p2p/WifiP2pManager.ActionListener.html">WifiP2pManager.ActionListener</a></code> you pass to this method receives a
successful callback, you can then begin discovering services on local devices by calling <code><a href="../../reference/android/net/wifi/p2p/WifiP2pManager.html#discoverServices(android.net.wifi.p2p.WifiP2pManager.Channel, android.net.wifi.p2p.WifiP2pManager.ActionListener)">discoverServices()</a></code>.</p>

<p>When local services are discovered, you'll receive a callback to either the <code><a href="../../reference/android/net/wifi/p2p/WifiP2pManager.DnsSdServiceResponseListener.html">WifiP2pManager.DnsSdServiceResponseListener</a></code> or <code><a href="../../reference/android/net/wifi/p2p/WifiP2pManager.UpnpServiceResponseListener.html">WifiP2pManager.UpnpServiceResponseListener</a></code>, depending on whether you
registered to use Bonjour or Upnp. The callback received in either case contains a
<code><a href="../../reference/android/net/wifi/p2p/WifiP2pDevice.html">WifiP2pDevice</a></code> object representing the peer device.</p>




<h3 id="NetworkUsage">Network usage</h3>

<p>The new method <code><a href="../../reference/android/net/ConnectivityManager.html#isActiveNetworkMetered()">isActiveNetworkMetered()</a></code> allows you to
check whether the device is currently connected to a metered network. By checking this state
before performing intensive network transactions, you can help manage the data usage that may cost your users money and make
informed decisions about whether to perform the transactions now or later (such as when the
device becomes connected to Wi-Fi).</p>





<h2 id="A11y">Accessibility</h2>

<h3 id="A11yService">Accessibility service APIs</h3>

<p>The reach of accessibility service APIs has been significantly increased in Android 4.1. It now
allows you to build services that monitor and respond to more input events, such as complex gestures
using <code><a href="../../reference/android/accessibilityservice/AccessibilityService.html#onGesture(int)">onGesture()</a></code> and other
input events through additions to the <code><a href="../../reference/android/view/accessibility/AccessibilityEvent.html">AccessibilityEvent</a></code>, <code><a href="../../reference/android/view/accessibility/AccessibilityNodeInfo.html">AccessibilityNodeInfo</a></code> and <code><a href="../../reference/android/view/accessibility/AccessibilityRecord.html">AccessibilityRecord</a></code> classes.</p>

<p>Accessibility services can also perform actions on behalf of the user, including clicking,
scrolling and stepping through text using <code><a href="../../reference/android/view/accessibility/AccessibilityNodeInfo.html#performAction(int)">performAction</a></code> and <code><a href="../../reference/android/view/accessibility/AccessibilityNodeInfo.html#setMovementGranularities(int)">setMovementGranularities</a></code>. The <code><a href="../../reference/android/accessibilityservice/AccessibilityService.html#performGlobalAction(int)">performGlobalAction()</a></code> method
also allows services to perform actions such as Back, Home, and open Recent
Apps and Notifications.</p>


<h3 id="A11yCustomNav">Customizable app navigation</h3>

<p>When building an Android app, you can now customize navigation schemes by finding focusable
elements and input widgets using <code><a href="../../reference/android/view/accessibility/AccessibilityNodeInfo.html#findFocus(int)">findFocus()</a></code> and <code><a href="../../reference/android/view/accessibility/AccessibilityNodeInfo.html#focusSearch(int)">focusSearch()</a></code>, and set focus
using <code><a href="../../reference/android/view/accessibility/AccessibilityNodeInfo.html#setAccessibilityFocused(boolean)">setAccessibilityFocused()</a></code>.</p>


<h3 id="A11yStructure">More accessible widgets</h3>

<p>The new <code>android.view.accessibility.AccessibilityNodeProvider</code> class allows you to
surface complex custom views to accessibility services so they can present the information in a
more accessible way. The <code>android.view.accessibility.AccessibilityNodeProvider</code> allows a user
widget with advanced content, such as a calendar grid, to present a logical semantic structure for
accessibility services that is completely separate from the widget’s layout structure. This semantic
structure allows accessibility services to present a more useful interaction model for users who are
visually impaired.</p>



<h2 id="CopyPaste">Copy and Paste</h2>

<h3 id="CopyIntent">Copy and paste with intents</h3>

<p>You can now associate a <code><a href="../../reference/android/content/ClipData.html">ClipData</a></code> object with an <code><a href="../../reference/android/content/Intent.html">Intent</a></code> using the <code><a href="../../reference/android/content/Intent.html#setClipData(android.content.ClipData)">setClipData()</a></code> method.
This is especially useful when using an intent to transfer multiple <code>content:</code> URIs to another
application, such as when sharing multiple documents.  The <code>content:</code> URIs supplied
this way will also respect the intent's flags to offer read or write access, allowing you to grant
access to multiple URIs in an the intent. When starting an <code><a href="../../reference/android/content/Intent.html#ACTION_SEND">ACTION_SEND</a></code> or <code><a href="../../reference/android/content/Intent.html#ACTION_SEND_MULTIPLE">ACTION_SEND_MULTIPLE</a></code> intent, the URIs supplied in the intent are now
automatically propagated to the <code><a href="../../reference/android/content/ClipData.html">ClipData</a></code> so that the receiver can have
access granted to them.</p>


<h5>Support for HTML and string styles</h5>

<p>The <code><a href="../../reference/android/content/ClipData.html">ClipData</a></code> class now supports styled text (either as HTML or
Android <a
href="../../guide/topics/resources/string-resource.html#FormattingAndStyling">styled
strings</a>). You can add HTML styled text to the <code><a href="../../reference/android/content/ClipData.html">ClipData</a></code> with <code><a href="../../reference/android/content/ClipData.html#newHtmlText(java.lang.CharSequence, java.lang.CharSequence, java.lang.String)">newHtmlText()</a></code>.</p>



<h2 id="Renderscript">Renderscript</h2>

<p>Renderscript computation functionality has been enhanced with the following features:</p>
<ul>
  <li>Support for multiple kernels within one script.</li>
  <li>Support for reading from allocation with filtered samplers from compute in a new script API
<code>rsSample</code>.</li>
  <li>Support for different levels of FP precision in <code>#pragma</code>.</li>
  <li>Support for querying additional information from RS objects from a compute script.</li>
  <li>Numerous performance improvements.</li>
</ul>

<p>New pragmas are also available to define the floating point precision required by your
compute Renderscripts. This lets you enable NEON like operations such as fast vector math operations
on the CPU path that wouldn’t otherwise be possible with full IEEE 754-2008 standard.</p>

<p class="note"><strong>Note:</strong> The experimental Renderscript graphics engine is now
deprecated.</p>



<h2 id="Animation">Animation</h2>

<h3 id="ActivityOptions">Activity launch animations</h3>

<p>You can now launch an <code><a href="../../reference/android/app/Activity.html">Activity</a></code> using zoom animations or
your own custom animations. To specify the animation you want, use the <code><a href="../../reference/android/app/ActivityOptions.html">ActivityOptions</a></code> APIs to build a <code><a href="../../reference/android/os/Bundle.html">Bundle</a></code> that you can
then pass to any of the
methods that start an activity, such as <code><a href="../../reference/android/app/Activity.html#startActivity(android.content.Intent, android.os.Bundle)">startActivity()</a></code>.</p>

<p>The <code><a href="../../reference/android/app/ActivityOptions.html">ActivityOptions</a></code> class includes a different method for each
type of animation you may want to show as your activity opens:</p>
<dl>
  <dt><code><a href="../../reference/android/app/ActivityOptions.html#makeScaleUpAnimation(android.view.View, int, int, int, int)">makeScaleUpAnimation()</a></code></dt>
    <dd>Creates an animation that scales up the activity window from a specified starting
    position on the screen and a specified starting size. For example, the home screen in
  Android 4.1 uses this when opening an app.</dd>
  <dt><code><a href="../../reference/android/app/ActivityOptions.html#makeThumbnailScaleUpAnimation(android.view.View, android.graphics.Bitmap, int, int)">makeThumbnailScaleUpAnimation()</a></code></dt>
    <dd>Creates an animation that scales up the activity window starting from a specified 
      position and a provided thumbnail image. For example, the Recent Apps window in 
      Android 4.1 uses this when returning to an app.</dd>
  <dt><code><a href="../../reference/android/app/ActivityOptions.html#makeCustomAnimation(android.content.Context, int, int)">makeCustomAnimation()</a></code></dt>
    <dd>Creates an animation defined by your own resources: one that defines the animation for
    the activity opening and another for the activity being stopped.</dd>
</dl>



<h3 id="TimeAnimator">Time animator</h3>

<p>The new <code><a href="../../reference/android/animation/TimeAnimator.html">TimeAnimator</a></code> provides a simple callback 
  mechanism with the <code><a href="../../reference/android/animation/TimeAnimator.TimeListener.html">TimeAnimator.TimeListener</a></code> that notifies
  you upon every frame of the animation. There is no duration, interpolation, or object value-setting with this Animator. The listener's callback receives information for each frame including
  total elapsed time and the elapsed time since the previous animation frame.</p>




<h2 id="UI">User Interface</h2>


<h3 id="Notifications">Notifications</h3>

<p>In Android 4.1, you can create notifications with larger content regions, big image previews,
  multiple action buttons, and configurable priority.</p>

<h5>Notification styles</h5>

<p>The new method <code><a href="../../reference/android/app/Notification.Builder.html#setStyle(android.app.Notification.Style)">setStyle()</a></code> allows you to specify
  one of three new styles for your notification that each offer a larger content region. To
specify the style for your large content region, pass <code><a href="../../reference/android/app/Notification.Builder.html#setStyle(android.app.Notification.Style)">setStyle()</a></code> one of the following objects:</p>
<dl>
  <dt><code><a href="../../reference/android/app/Notification.BigPictureStyle.html">Notification.BigPictureStyle</a></code></dt>
    <dd>For notifications that includes a large image attachment.</dd>
  <dt><code><a href="../../reference/android/app/Notification.BigTextStyle.html">Notification.BigTextStyle</a></code></dt>
    <dd>For notifications that includes a lot of text, such as a single email.</dd>
  <dt><code><a href="../../reference/android/app/Notification.InboxStyle.html">Notification.InboxStyle</a></code></dt>
    <dd>For notifications that include a list of strings, such as snippets from multiple emails.</dd>
</dl>

<h5>Notification actions</h5>

<p>There's now support for up to two action buttons that appear at the bottom of the
  notification message, whether your notification uses the normal or larger style.</p>

<p>To add an action button, call <code><a href="../../reference/android/app/Notification.Builder.html#addAction(int, java.lang.CharSequence, android.app.PendingIntent)">addAction()</a></code>. This method takes three arguments: a drawable resource for an icon,
  text for the button, and a <code><a href="../../reference/android/app/PendingIntent.html">PendingIntent</a></code> that defines the action
  to perfrom.</p>


<h5>Priorities</h5>

<p>You can now hint to the system how important your notification is to affect the
  order of your notification in the list by setting
the priority with <code><a href="../../reference/android/app/Notification.Builder.html#setPriority(int)">setPriority()</a></code>. You
can pass this one of five different priority levels defined by <code>PRIORITY_*</code> constants
in the <code><a href="../../reference/android/app/Notification.html">Notification</a></code> class. The default is <code><a href="../../reference/android/app/Notification.html#PRIORITY_DEFAULT">PRIORITY_DEFAULT</a></code>, and there's two levels higher and two levels lower.</p>

<p>High priority notifications are things that users generally want to respond to quickly,
such as a new instant message, text message, or impending event reminder. Low priority
notifications are things like expired calendar events or app promotions.</p>

<h3 id="SystemUI">Controls for system UI</h3>

<p>Android 4.0 (Ice Cream Sandwich) added new flags to control the visibility of the system UI
elements, such as to dim the appearance of the system bar or make it disappear completely on handsets.
Android 4.1 adds a few more flags that allow you to further control the appearance of system
UI elements and your activity layout in relation to them by calling <code><a href="../../reference/android/view/View.html#setSystemUiVisibility(int)">setSystemUiVisibility()</a></code>
and passing the following flags:</p>

<dl>
  <dt><code><a href="../../reference/android/view/View.html#SYSTEM_UI_FLAG_FULLSCREEN">SYSTEM_UI_FLAG_FULLSCREEN</a></code></dt>
    <dd>Hides non-critical system UI (such as the status bar). 
      If your activity uses the action bar in overlay mode (by
      enabling <a href="../../reference/android/R.attr.html#windowActionBarOverlay"><code>android:windowActionBarOverlay</code></a>), then this flag also hides the action bar and does
      so with a coordinated animation when both hiding and showing the two.</dd>
  
  <dt><code><a href="../../reference/android/view/View.html#SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN">SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN</a></code></dt>
    <dd>Sets your activity layout to use the same screen area that's available when you've
    enabled <code><a href="../../reference/android/view/View.html#SYSTEM_UI_FLAG_FULLSCREEN">SYSTEM_UI_FLAG_FULLSCREEN</a></code> even if the system UI elements
    are still visible. Although parts of your layout will be overlayed by the
    system UI, this is useful if your app often hides and shows the system UI with 
  <code><a href="../../reference/android/view/View.html#SYSTEM_UI_FLAG_FULLSCREEN">SYSTEM_UI_FLAG_FULLSCREEN</a></code>, because it avoids your layout from
  adjusting to the new layout bounds each time the system UI hides or appears.</dd>

  <dt><code><a href="../../reference/android/view/View.html#SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION">SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION</a></code></dt>
    <dd>Sets your activity layout to use the same screen area that's available when you've
    enabled <code><a href="../../reference/android/view/View.html#SYSTEM_UI_FLAG_HIDE_NAVIGATION">SYSTEM_UI_FLAG_HIDE_NAVIGATION</a></code> (added in Android 4.0)
    even if the system UI elements are still visible. Although parts of your layout will be
    overlayed by the
    navigation bar, this is useful if your app often hides and shows the navigation bar
  with <code><a href="../../reference/android/view/View.html#SYSTEM_UI_FLAG_HIDE_NAVIGATION">SYSTEM_UI_FLAG_HIDE_NAVIGATION</a></code>, because it avoids your layout from
  adjusting to the new layout bounds each time the navigation bar hides or appears.</dd>

  <dt><code><a href="../../reference/android/view/View.html#SYSTEM_UI_FLAG_LAYOUT_STABLE">SYSTEM_UI_FLAG_LAYOUT_STABLE</a></code></dt>
    <dd>You might want to add this flag if you're using <code><a href="../../reference/android/view/View.html#SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN">SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN</a></code> and/or <code><a href="../../reference/android/view/View.html#SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION">SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION</a></code> to ensure that when you call
      <code><a href="../../reference/android/view/View.html#fitSystemWindows(android.graphics.Rect)">fitSystemWindows()</a></code> on a view that the
    bounds defined remain consistent with regard to the available screen space.
    That is, with this flag set, <code><a href="../../reference/android/view/View.html#fitSystemWindows(android.graphics.Rect)">fitSystemWindows()</a></code> will behave as if the visibility of system UI elements is unchanged
    even after you hide all system UI.</dd>
    <dd></dd>
</dl>

<p>For more discussion about the other related system UI flags, read about
  those added in <a href="../../about/versions/android-4.0.html#SystemUI">Android 4.0</a>.</p>


<h3 id="RemoteViews">Remote views</h3>

<p><code><a href="../../reference/android/widget/GridLayout.html">GridLayout</a></code> and <code><a href="../../reference/android/view/ViewStub.html">ViewStub</a></code> 
  are now remotable views so you can use them in layouts for your
  app widgets and notification custom layouts.</p>



<h3 id="Fonts">Font families</h3>

<p>Android 4.1 adds several more variants of the Roboto font style for a total of 10 variants, 
  and they're all usable by apps. Your apps now have access to the full set of both light and
condensed variants.</p>

<p>The complete set of Roboto font variants available is:</p>

<ul>
  <li>Regular</li>
  <li>Italic</li>
  <li>Bold</li>
  <li>Bold-italic</li>
  <li>Light</li>
  <li>Light-italic</li>
  <li>Condensed regular</li>
  <li>Condensed italic</li>
  <li>Condensed bold</li>
  <li>Condensed bold-italic</li>
</ul>

<p>You can apply any one of these with the new <code><a href="../../reference/android/R.attr.html#fontFamily">fontFamily</a></code>
  attribute in combination with the <code><a href="../../reference/android/R.attr.html#textStyle">textStyle</a></code> attribute.</p>

<p>Supported values for <code><a href="../../reference/android/R.attr.html#fontFamily">fontFamily</a></code> are:</p>
<ul>
  <li><code>"sans-serif"</code> for regular Roboto</li>
  <li><code>"sans-serif-light"</code> for Roboto Light</li>
  <li><code>"sans-serif-condensed"</code> for Roboto Condensed</li>
</ul>

<p>You can then apply bold and/or italic with <code><a href="../../reference/android/R.attr.html#textStyle">textStyle</a></code> values
<code>"bold"</code> and <code>"italic"</code>. You can apply both like so: <code>android:textStyle="bold|italic"</code>.</p>

<p>You can also use <code><a href="../../reference/android/graphics/Typeface.html#create(android.graphics.Typeface, int)">Typeface.create()</a></code>. 
  For example, <code>Typeface.create("sans-serif-light", Typeface.NORMAL)</code>.</p>





    
<h2 id="Input">Input Framework</h2>


<h3 id="InputDevice">Multiple input devices</h3>

<p>The new <code><a href="../../reference/android/hardware/input/InputManager.html">InputManager</a></code> class allows you to query the
set of input devices current connected and register to be notified when a new device
is added, changed, or removed. This is particularly useful if you're building a game
that supports multiple players and you want to detect how many controllers are connected
and when there are changes to the number of controllers.</p>

<p>You can query all input devices connected by calling
<code><a href="../../reference/android/hardware/input/InputManager.html#getInputDeviceIds()">getInputDeviceIds()</a></code>. This returns
an array of integers, each of which is an ID for a different input device. You can then call
<code><a href="../../reference/android/hardware/input/InputManager.html#getInputDevice(int)">getInputDevice()</a></code> to acquire
an <code><a href="../../reference/android/view/InputDevice.html">InputDevice</a></code> for a specified input device ID.</p>

<p>If you want to be informed when new input devices are connected, changed, or disconnected,
implement the <code><a href="../../reference/android/hardware/input/InputManager.InputDeviceListener.html">InputManager.InputDeviceListener</a></code> interface and
register it with <code><a href="../../reference/android/hardware/input/InputManager.html#registerInputDeviceListener(android.hardware.input.InputManager.InputDeviceListener, android.os.Handler)">registerInputDeviceListener()</a></code>.</p>

<h3 id="Vibrate">Vibrate for input controllers</h3>

<p>If connected input devices have their own vibrate capabilities, you can now control
the vibration of those devices using the existing <code><a href="../../reference/android/os/Vibrator.html">Vibrator</a></code> APIs simply
by calling <code><a href="../../reference/android/view/InputDevice.html#getVibrator()">getVibrator()</a></code> on the <code><a href="../../reference/android/view/InputDevice.html">InputDevice</a></code>.</p>



<h2 id="Permissions">Permissions</h2>

<p>The following are new permissions:</p>

<dl>
  <dt><code><a href="../../reference/android/Manifest.permission.html#READ_EXTERNAL_STORAGE">READ_EXTERNAL_STORAGE</a></code></dt>
  <dd>Provides protected read access to external storage.  In Android 4.1 by 
    default all applications still have read
access.  This will be changed in a future release to require that applications explicitly request
read access using this permission.  If your application already requests write access, it will
automatically get read access as well.  There is a new developer option to turn on read access
restriction, for developers to test their applications against how Android will behave in the
future.</dd>
  <dt><code><a href="../../reference/android/Manifest.permission.html#READ_USER_DICTIONARY">READ_USER_DICTIONARY</a></code></dt>
    <dd>Allows an application to read the user dictionary. This should only be required by an
IME, or a dictionary editor like the Settings app.</dd>
  <dt><code><a href="../../reference/android/Manifest.permission.html#READ_CALL_LOG">READ_CALL_LOG</a></code></dt>
    <dd>Allows an application to read the system's call log that contains information about
      incoming and outgoing calls.</dd>
  <dt><code><a href="../../reference/android/Manifest.permission.html#WRITE_CALL_LOG">WRITE_CALL_LOG</a></code></dt>
    <dd>Allows an application to modify the system's call log stored on your phone</dd>
  <dt><code><a href="../../reference/android/Manifest.permission.html#WRITE_USER_DICTIONARY">WRITE_USER_DICTIONARY</a></code></dt>
    <dd>Allows an application to write to the user's word dictionary.</dd>
</dl>


<h2 id="DeviceFeatures">Device Features</h2>

<p>Android 4.1 includes a new feature declaration for devices that are dedicated
to displaying the user interface on a television screen: <code><a href="../../reference/android/content/pm/PackageManager.html#FEATURE_TELEVISION">FEATURE_TELEVISION</a></code>. To declare that your app requires
a television interface, declare this feature in your manifest file with the <a href="../../guide/topics/manifest/uses-feature-element.html"><code>&lt;uses-feature></code></a> element:</p>
<pre>
&lt;manifest ... >
    &lt;uses-feature android:name="android.hardware.type.television"
                  android:required="true" />
    ...
&lt;/manifest>
</pre>

<p>This feature defines "television" to be a typical living room television experience: 
  displayed on a big screen, where the user is sitting far away and the dominant form of 
  input is be something like a d-pad, and generally not through touch or a 
  mouse/pointer-device.</p>









    </div>
      
      <div class="content-footer layout-content-row" 
                    itemscope itemtype="http://schema.org/SiteNavigationElement">
        <div class="layout-content-col col-9" style="padding-top:4px">
          
            <div class="g-plusone" data-size="medium"></div>
          
        </div>
        
        <div class="paging-links layout-content-col col-4">
          
        </div>
        
      </div>
      
      
      

  </div> <!-- end jd-content -->

<div id="footer" class="wrap" >
        

  <div id="copyright">
    
  Except as noted, this content is 
  licensed under <a href="http://creativecommons.org/licenses/by/2.5/">
  Creative Commons Attribution 2.5</a>. For details and 
  restrictions, see the <a href="../../license.html">Content 
  License</a>.
  </div>


  <div id="footerlinks">
    
  <p>
    <a href="../../about/index.html">About Android</a>&nbsp;&nbsp;|&nbsp;
    <a href="../../legal.html">Legal</a>&nbsp;&nbsp;|&nbsp;
    <a href="../../support.html">Support</a>
  </p>
  </div>

</div> <!-- end footer -->
</div><!-- end doc-content -->

</div> <!-- end body-content --> 






</body>
</html>



